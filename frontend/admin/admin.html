<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <style>
       body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }

        th, td {
            border: 1px solid #ccc;
            padding: 10px;
            text-align: left;
        }

        th {
            background-color: #f4f4f4;
        }

        button {
            padding: 10px 20px;
            font-size: 16px;
            background-color: green;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 5px;
        }

        button:hover {
            background-color: darkgreen;
        }

        .details-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #fff;
            border: 1px solid #ccc;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            padding: 20px;
            width: 300px;
            z-index: 1000;
            display: none;
        }

        .details-popup h2 {
            margin-top: 0;
        }

        .details-popup p {
            margin: 5px 0;
        }

        .details-popup button {
            background-color: black;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 14px;
            border-radius: 5px;
            cursor: pointer;
        }

        .details-popup button:hover {
            background-color: gray;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 999;
            display: none;
        }


        @media only screen and (max-width: 600px) {
  body {
    margin: 10px;
  }
  html{
    overflow: hidden;
  }

  th, td {
    padding: 8px;
    font-size: 14px; /* Reduce table font size */
  }

  button {
    padding: 8px 16px;
    font-size: 14px; /* Reduce button font size */
  }

  .details-popup {
    width: 90%; /* Adjust popup width for small screens */
    padding: 15px;
  }

  .details-popup button {
    font-size: 12px; /* Adjust button font size in the popup */
  }

  .details-popup h2, .details-popup p {
    font-size: 14px; /* Reduce font size for popup text */
  }
}

    </style>



<!-- <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
    th, td { border: 1px solid #ccc; padding: 10px; text-align: left; }
    th { background-color: #f4f4f4; }
    button { padding: 10px 20px; font-size: 16px; background-color: green; color: white; border: none; cursor: pointer; border-radius: 5px; }
    button:hover { background-color: darkgreen; }
    .details-popup {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-color: #fff;
        border: 1px solid #ccc;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        padding: 20px;
        width: 300px;
        z-index: 1000;
        display: none;
    }
    .details-popup h2 { margin-top: 0; }
    .details-popup p { margin: 5px 0; }
    .details-popup button {
        background-color: black;
        color: white;
        border: none;
        padding: 10px 20px;
        font-size: 14px;
        border-radius: 5px;
        cursor: pointer;
    }
    .details-popup button:hover { background-color: gray; }
    .overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 999;
        display: none;
    }
</style> -->
</head>
<body>
    <h1>Admin Dashboard</h1>
    <h2>Order Requests</h2>
    <table>
        <thead>
            <tr>
                <th>Username</th>
                <th>Product Name</th>
                <th>Size</th>
                <th>Quantity</th>
                <th>Price</th>
                <th>Address</th>
                <th>Status</th>
                <th>Show Details</th>
                <th>Action</th>
                <th>Order Placed</th>
            </tr>
        </thead>
        <tbody id="ordersTableBody"></tbody>
    </table>

    <!-- Popup for displaying user details -->
    <div class="overlay" id="overlay"></div>
    <div class="details-popup" id="detailsPopup">
        <h2>User Details</h2>
        <p id="popupUsername"><strong>Name:</strong> </p>
        <p id="popupAddress"><strong>Address:</strong> </p>
        <p id="popupEmail"><strong>Email:</strong> </p>
        <button id="closePopupButton">Close</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const userDetails = JSON.parse(localStorage.getItem('userDetails')) || {};
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            const ordersTableBody = document.getElementById('ordersTableBody');
            const overlay = document.getElementById('overlay');
            const detailsPopup = document.getElementById('detailsPopup');
            const popupUsername = document.getElementById('popupUsername');
            const popupAddress = document.getElementById('popupAddress');
            const popupEmail = document.getElementById('popupEmail');
            const closePopupButton = document.getElementById('closePopupButton');

            // Check if there are no orders
            if (cart.length === 0) {
                ordersTableBody.innerHTML = `<tr><td colspan="10" style="text-align:center;">No orders to display.</td></tr>`;
                return;
            }

            // Populate the orders table
            cart.forEach((product, index) => {
                const price = typeof product.price === 'string' ? parseFloat(product.price.replace('$', '')) : product.price;
                const subtotal = price * product.quantity;

                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${userDetails.username || 'N/A'}</td>
                    <td>${product.name}</td>
                    <td>${product.size}</td>
                    <td>${product.quantity}</td>
                    <td>â‚¹${subtotal.toFixed(2)}</td>
                    <td>${userDetails.address || 'N/A'}</td>
                    <td id="status-${index}">${product.status || 'Pending'}</td>
                    <td><button class="showDetailsButton" data-index="${index}">Show Details</button></td>
                    <td><button class="confirmButton" data-index="${index}">Confirm</button></td>
                    <td><button class="orderPlacedButton" data-index="${index}">Order Placed</button></td>
                `;

                ordersTableBody.appendChild(row);
            });

            // Add event listener to all confirm buttons
            document.querySelectorAll('.confirmButton').forEach(button => {
                button.addEventListener('click', (event) => {
                    const index = event.target.getAttribute('data-index');
                    cart[index].status = 'Order Dispatched';
                    localStorage.setItem('cart', JSON.stringify(cart));
                    document.getElementById(`status-${index}`).innerText = 'Order Dispatched';
                    event.target.disabled = true;
                    event.target.innerText = 'Confirmed';
                });
            });

            // Add event listener to all order placed buttons
            document.querySelectorAll('.orderPlacedButton').forEach(button => {
                button.addEventListener('click', (event) => {
                    const index = event.target.getAttribute('data-index');
                    cart.splice(index, 1); // Remove the order from the cart
                    localStorage.setItem('cart', JSON.stringify(cart));
                    location.reload(); // Reload the page to reflect the changes
                });
            });

            // Add event listener to all show details buttons
            document.querySelectorAll('.showDetailsButton').forEach(button => {
                button.addEventListener('click', () => {
                    popupUsername.innerHTML = `<strong>Name:</strong> ${userDetails.username || 'N/A'}`;
                    popupAddress.innerHTML = `<strong>Address:</strong> ${userDetails.address || 'N/A'}`;
                    popupEmail.innerHTML = `<strong>Email:</strong> ${userDetails.email || 'N/A'}`;
                    detailsPopup.style.display = 'block';
                    overlay.style.display = 'block';
                });
            });

            // Close popup
            closePopupButton.addEventListener('click', () => {
                detailsPopup.style.display = 'none';
                overlay.style.display = 'none';
            });
        });
    </script>
</body>
</html>
